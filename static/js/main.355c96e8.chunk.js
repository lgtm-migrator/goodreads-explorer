(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{111:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(38),u=n.n(c),s=n(24),o=n(309),i=n(17),d=n(57),l=n(16),f=n(4),p={isLoading:0},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case f.c:return Object(l.a)({},e,{isLoading:e.isLoading+1});case f.b:return Object(l.a)({},e,{isLoading:e.isLoading-1});default:return e}},h={userId:null,userInfo:null,userData:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.f:var n=t.userId;return Object(l.a)({},e,{userId:n});case f.g:var r=t.userInfo;return Object(l.a)({},e,{userInfo:r.user});case f.d:var a=t.userId;return Object(l.a)({},e,{userId:a});case f.e:var c=t.userData;return Object(l.a)({},e,{userData:c.user});default:return e}},m=Object(i.c)({app:b,dashboard:v}),O=n(18),j=n.n(O),w=n(12),E=n(15),x=n(22),g=n.n(x),k=g.a.mark(y);function y(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)({type:"SUCCESS",message:"Hello World"});case 2:case"end":return e.stop()}},k,this)}var I=[Object(E.d)(f.h,y)],S=n(19),_="https://uqh87q11i5.execute-api.us-east-1.amazonaws.com/prod",C=g.a.mark(L),T=function(){return{method:"GET",headers:{"Content-Type":"application/json"}}},H=function(e){if(200!==e.status){var t={error:{code:e.status,message:"Fetch error"},status:e.status,statusText:e.statusText};return Promise.reject(t)}return e.json().then(function(e){return e})},D=function(e,t){return fetch(e).then(H).catch(function(e){return e})};function L(e){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.c)({type:f.c});case 2:return t.next=4,e();case 4:return t.next=6,Object(E.c)({type:f.b});case 6:case"end":return t.stop()}},C,this)}function R(e){var t="".concat(_,"/user/show?id=").concat(e);return D(t,T())}function F(e,t){var n="".concat(_,"/review/list?id=").concat(e,"&shelf=").concat(t,"&per_page=200");return D(n,T())}var U=[Object(E.e)(f.f,function(e){return L(j.a.mark(function t(){var n,r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(E.b)(R,e.userId);case 3:if((n=t.sent).error){t.next=10;break}return r=n,t.next=8,Object(E.c)(S.e(r));case 8:t.next=12;break;case 10:return t.next=12,Object(E.c)(S.a(n));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(0),t.next=18,Object(E.c)(S.a(t.t0));case 18:case"end":return t.stop()}},t,this,[[0,14]])}))}),Object(E.e)(f.d,function(e){return L(j.a.mark(function t(){var n,r,a,c,u;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((n=JSON.parse(window.localStorage.getItem(e.userId)))&&Date.now()-n.timestamp<36e5)){t.next=7;break}return t.next=5,Object(E.c)(S.c(n.data));case 5:t.next=24;break;case 7:return t.next=9,Object(E.b)(R,e.userId);case 9:if((r=t.sent).error){t.next=22;break}return c=(a=r).user.user_shelves.user_shelf.map(function(e){return e.name}),t.next=15,Object(E.a)(c.map(function(t){return Object(E.b)(F,e.userId,t)}));case 15:return u=t.sent,a.user.user_shelves=u.map(function(e,t){return{name:c[t],books:e.books?e.books:{book:[]}}}),window.localStorage.setItem(e.userId,JSON.stringify({data:a,timestamp:Date.now()})),t.next=20,Object(E.c)(S.c(a));case 20:t.next=24;break;case 22:return t.next=24,Object(E.c)(S.a(r));case 24:t.next=30;break;case 26:return t.prev=26,t.t0=t.catch(0),t.next=30,Object(E.c)(S.a(t.t0));case 30:case"end":return t.stop()}},t,this,[[0,26]])}))})],A=j.a.mark(N);function N(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([].concat(Object(w.a)(I),Object(w.a)(U)));case 2:case"end":return e.stop()}},A,this)}var z=N,J=Object(d.a)();var M=n(39),P=n(40),W=n(43),q=n(41),B=n(44),G=n(23),$=n(312),K=n(297),Q=n(308),V=n(313),X=n(36),Y=(n(94),function(){return a.a.createElement("div",{className:"suspenseFallback"},"Loading...")}),Z=n(296),ee=(n(96),n(98),Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(5),n.e(2)]).then(n.bind(null,302))})),te=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(7),n.e(3)]).then(n.bind(null,300))}),ne=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(W.a)(this,Object(q.a)(t).call(this,e))).searchHandler=n.searchHandler.bind(Object(G.a)(Object(G.a)(n))),X.a.initialize("UA-132487735-1",{testMode:n.props.testMode}),X.a.pageview(window.location.pathname+window.location.search),n}return Object(B.a)(t,e),Object(P.a)(t,[{key:"searchHandler",value:function(e){this.props.history.push("/user/".concat(e))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return a.a.createElement(Z.a,{className:"App",spinning:this.props.isLoading>0,delay:500},a.a.createElement($.a,null,a.a.createElement(K.a,{exact:!0,path:"/",render:function(t){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(Y,null)},a.a.createElement(te,{searchHandler:e.searchHandler}))}}),a.a.createElement(K.a,{path:"/user/:userId",render:function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(Y,null)},a.a.createElement(ee,e))}}),a.a.createElement(Q.a,{to:"/"})))}}]),t}(r.Component);ne.defaultProps={testMode:!1};var re=Object(V.a)(Object(s.b)(function(e){return{isLoading:e.app.isLoading}},{})(ne));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(111);var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[J],n=[i.a.apply(void 0,t)],r=i.d,a=Object(i.e)(m,e,r.apply(void 0,n));return a.runSaga=J.run(z),a.injectedReducers={},a.injectedSagas={},a}();u.a.render(a.a.createElement(s.a,{store:ae},a.a.createElement(o.a,null,a.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},19:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o});var r=n(4),a=function(e){return{type:r.a,err:e}},c=function(e){return{type:r.f,userId:e}},u=function(e){return{type:r.g,userInfo:e}},s=function(e){return{type:r.d,userId:e}},o=function(e){return{type:r.e,userData:e}}},4:function(e,t,n){"use strict";n.d(t,"h",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return d});var r="HELLO_WORLD",a="FETCH_START",c="ERROR_OCCURED",u="FETCH_END",s="FETCH_USER_INFO",o="FETCH_USER_INFO_SUCCESS",i="FETCH_USER_DATA",d="FETCH_USER_DATA_SUCCESS"},81:function(e,t,n){e.exports=n(113)},94:function(e,t,n){},98:function(e,t,n){}},[[81,8,6]]]);
//# sourceMappingURL=main.355c96e8.chunk.js.map