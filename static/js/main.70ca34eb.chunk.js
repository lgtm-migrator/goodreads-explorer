(this["webpackJsonpgoodreads-explorer"]=this["webpackJsonpgoodreads-explorer"]||[]).push([[6],{106:function(e,t,r){},108:function(e,t,r){},12:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"g",(function(){return i})),r.d(t,"f",(function(){return l}));var n=r(4),a=function(e){return{type:n.a,err:e}},c=function(e){return{type:n.f,userId:e}},u=function(e){return{type:n.g,userInfo:e}},s=function(e){return{type:n.d,userId:e}},o=function(e){return{type:n.e,userData:e}},i=function(e){return{type:n.j,err:e}},l=function(e){return{type:n.i,err:e}}},124:function(e,t,r){},125:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(43),u=r.n(c),s=r(25),o=r(130),i=r(16),l=r(68),f=r(6),d=r(4),b={isLoading:0,error:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d.c:return Object(f.a)(Object(f.a)({},e),{},{isLoading:e.isLoading+1});case d.b:return Object(f.a)(Object(f.a)({},e),{},{isLoading:e.isLoading-1});case d.a:var r=t.err;return Object(f.a)(Object(f.a)({},e),{},{error:{title:r.name,message:r.message}});case d.i:var n=t.err;return Object(f.a)(Object(f.a)({},e),{},{error:n});case d.j:var a=t.err;return Object(f.a)(Object(f.a)({},e),{},{error:a});default:return e}},O={userId:null,userInfo:null,userData:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d.f:var r=t.userId;return Object(f.a)(Object(f.a)({},e),{},{userId:r});case d.g:var n=t.userInfo;return Object(f.a)(Object(f.a)({},e),{},{userInfo:n.user});case d.d:var a=t.userId;return Object(f.a)(Object(f.a)({},e),{},{userId:a});case d.e:var c=t.userData;return Object(f.a)(Object(f.a)({},e),{},{userData:c.user});default:return e}},m=Object(i.c)({app:p,dashboard:h}),j=r(7),v=r.n(j),g=r(40),x=r(5),k=v.a.mark(E);function E(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.c)({type:"SUCCESS",message:"Hello World"});case 2:case"end":return e.stop()}}),k)}var w=[Object(x.d)(d.h,E)],y=r(12),I=r(38),S="https://uqh87q11i5.execute-api.us-east-1.amazonaws.com/prod",_=v.a.mark(T),C=function(e){if(200!==e.status){var t={error:{code:e.status,message:"Fetch error"},status:e.status,statusText:e.statusText};return Promise.reject(t)}return e.json().then((function(e){return e}))},R=function(e,t){return fetch(e).then(C).catch((function(e){return e}))};function T(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(x.c)({type:d.c});case 2:return t.next=4,e();case 4:return t.next=6,Object(x.c)({type:d.b});case 6:case"end":return t.stop()}}),_)}function D(e){var t="".concat(S,"/user/show?id=").concat(e);return R(t)}function H(e,t){return L.apply(this,arguments)}function L(){return(L=Object(I.a)(v.a.mark((function e(t,r){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise(function(){var e=Object(I.a)(v.a.mark((function e(n,a){var c,u,s,o,i,l,f,d,b,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=1,u=!1,s={books:{total:0,book:[]}};case 3:return o="".concat(S,"/review/list?id=").concat(t,"&shelf=").concat(r,"&per_page=200&page=").concat(c),e.next=6,R(o);case 6:i=e.sent,l=i.books,f=l.currentpage,d=l.numpages,b=l.book,p=l.total,s.books.total=parseInt(p),b&&(s.books.book=s.books.book.concat(b.constructor===Array?b:[b])),c+=1,f===d&&(u=!0,n(s));case 12:if(!1===u){e.next=3;break}case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=[Object(x.e)(d.f,(function(e){return T(v.a.mark((function t(){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(x.b)(D,e.userId);case 3:if((r=t.sent).error){t.next=10;break}return n=r,t.next=8,Object(x.c)(y.e(n));case 8:t.next=12;break;case 10:return t.next=12,Object(x.c)(y.a(r));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(0),t.next=18,Object(x.c)(y.a(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))})),Object(x.e)(d.d,(function(e){return T(v.a.mark((function t(){var r,n,a,c,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((r=JSON.parse(window.localStorage.getItem(e.userId)))&&Date.now()-r.timestamp<36e5)){t.next=7;break}return t.next=5,Object(x.c)(y.c(r.data));case 5:t.next=31;break;case 7:return t.next=9,Object(x.b)(D,e.userId);case 9:if(!(n=t.sent).user||n.error){t.next=29;break}if(!(a=n).user.user_shelves){t.next=23;break}return c=a.user.user_shelves.user_shelf.map((function(e){return e.name})),t.next=16,Object(x.a)(c.map((function(t){return Object(x.b)(H,e.userId,t)})));case 16:u=t.sent,a.user.user_shelves=u.map((function(e,t){return{name:c[t],books:e.books?e.books:{book:[]}}}));try{window.localStorage.setItem(e.userId,JSON.stringify({data:a,timestamp:Date.now()}))}catch(s){console.log(s)}return t.next=21,Object(x.c)(y.c(a));case 21:t.next=27;break;case 23:return t.next=25,Object(x.c)(y.g({title:"Private Account",message:"Sorry ".concat(a.user.name,", your account is private. Can't fetch your data.")}));case 25:return t.next=27,Object(x.c)(y.c({user:Object(f.a)(Object(f.a)({},a.user),{},{user_shelves:[]})}));case 27:t.next=31;break;case 29:return t.next=31,Object(x.c)(y.f({title:"Network Error",message:n.message}));case 31:t.next=37;break;case 33:return t.prev=33,t.t0=t.catch(0),t.next=37,Object(x.c)(y.a(t.t0));case 37:case"end":return t.stop()}}),t,null,[[0,33]])})))}))],U=v.a.mark(F);function F(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)([].concat(Object(g.a)(w),Object(g.a)(A)));case 2:case"end":return e.stop()}}),U)}var N=F,P=Object(l.a)();var z=r(44),W=r(45),J=r(22),M=r(48),q=r(47),B=r(131),K=r(128),V=r(129),$=r(132),G=r(39),Q=r(26),X=r(127),Y=(r(107),r(108),Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(3),r.e(4),r.e(11),r.e(15)]).then(r.bind(null,609))}))),Z=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(3),r.e(19),r.e(16)]).then(r.bind(null,594))})),ee=Object(n.lazy)((function(){return r.e(21).then(r.bind(null,265))})),te=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(4),r.e(20),r.e(22)]).then(r.bind(null,595))})),re=function(e){Object(M.a)(r,e);var t=Object(q.a)(r);function r(e){var n;return Object(z.a)(this,r),(n=t.call(this,e)).searchHandler=n.searchHandler.bind(Object(J.a)(n)),G.a.initialize("UA-132487735-1",{testMode:n.props.testMode}),G.a.pageview(window.location.pathname+window.location.search),n}return Object(W.a)(r,[{key:"searchHandler",value:function(e){this.props.history.push("/user/".concat(e,"/viz/stats"))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Q.a,null)},a.a.createElement(ee,null,a.a.createElement(X.a,{className:"App",spinning:this.props.isLoading>0,delay:500},a.a.createElement(B.a,null,a.a.createElement(K.a,{exact:!0,path:"/",render:function(t){return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Q.a,null)},a.a.createElement(Z,{searchHandler:e.searchHandler}))}}),a.a.createElement(K.a,{path:"/user/:userId",render:function(e){return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Q.a,null)},a.a.createElement(Y,e))}}),a.a.createElement(V.a,{to:"/"})),this.props.error&&a.a.createElement(te,{error:this.props.error}))))}}]),r}(n.Component);re.defaultProps={testMode:!1};var ne=Object($.a)(Object(s.b)((function(e){return{isLoading:e.app.isLoading,error:e.app.error}}),{})(re));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(124);var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[P],r=[i.a.apply(void 0,t)],n=i.d,a=Object(i.e)(m,e,n.apply(void 0,r));return a.runSaga=P.run(N),a.injectedReducers={},a.injectedSagas={},a}();u.a.render(a.a.createElement(s.a,{store:ae},a.a.createElement(o.a,{basename:"/"},a.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},26:function(e,t,r){"use strict";var n=r(1),a=r.n(n);r(106);t.a=function(){return a.a.createElement("div",{className:"suspenseFallback"},"Loading...")}},4:function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return d}));var n="HELLO_WORLD",a="FETCH_START",c="ERROR_OCCURED",u="NETWORK_ERROR_OCCURED",s="PRIVATE_ACCOUNT_ERROR",o="FETCH_END",i="FETCH_USER_INFO",l="FETCH_USER_INFO_SUCCESS",f="FETCH_USER_DATA",d="FETCH_USER_DATA_SUCCESS"},96:function(e,t,r){e.exports=r(125)}},[[96,7,9]]]);
//# sourceMappingURL=main.70ca34eb.chunk.js.map