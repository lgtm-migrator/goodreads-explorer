(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{105:function(e,t,r){},107:function(e,t,r){},12:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return u}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return o}),r.d(t,"g",function(){return i}),r.d(t,"f",function(){return l});var n=r(4),a=function(e){return{type:n.a,err:e}},c=function(e){return{type:n.f,userId:e}},u=function(e){return{type:n.g,userInfo:e}},s=function(e){return{type:n.d,userId:e}},o=function(e){return{type:n.e,userData:e}},i=function(e){return{type:n.j,err:e}},l=function(e){return{type:n.i,err:e}}},123:function(e,t,r){},124:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(41),u=r.n(c),s=r(24),o=r(129),i=r(16),l=r(66),d=r(11),f=r(4),p={isLoading:0,error:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.c:return Object(d.a)({},e,{isLoading:e.isLoading+1});case f.b:return Object(d.a)({},e,{isLoading:e.isLoading-1});case f.a:var r=t.err;return Object(d.a)({},e,{error:{title:r.name,message:r.message}});case f.i:var n=t.err;return Object(d.a)({},e,{error:n});case f.j:var a=t.err;return Object(d.a)({},e,{error:a});default:return e}},h={userId:null,userInfo:null,userData:null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.f:var r=t.userId;return Object(d.a)({},e,{userId:r});case f.g:var n=t.userInfo;return Object(d.a)({},e,{userInfo:n.user});case f.d:var a=t.userId;return Object(d.a)({},e,{userId:a});case f.e:var c=t.userData;return Object(d.a)({},e,{userData:c.user});default:return e}},O=Object(i.c)({app:b,dashboard:m}),v=r(10),j=r.n(v),E=r(38),g=r(5),w=j.a.mark(x);function x(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)({type:"SUCCESS",message:"Hello World"});case 2:case"end":return e.stop()}},w)}var k=[Object(g.d)(f.h,x)],y=r(12),S="https://uqh87q11i5.execute-api.us-east-1.amazonaws.com/prod",_=j.a.mark(T),I=function(){return{method:"GET",headers:{"Content-Type":"application/json"}}},C=function(e){if(200!==e.status){var t={error:{code:e.status,message:"Fetch error"},status:e.status,statusText:e.statusText};return Promise.reject(t)}return e.json().then(function(e){return e})},R=function(e,t){return fetch(e).then(C).catch(function(e){return e})};function T(e){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.c)({type:f.c});case 2:return t.next=4,e();case 4:return t.next=6,Object(g.c)({type:f.b});case 6:case"end":return t.stop()}},_)}function D(e){var t="".concat(S,"/user/show?id=").concat(e);return R(t,I())}function H(e,t){var r="".concat(S,"/review/list?id=").concat(e,"&shelf=").concat(t,"&per_page=200");return R(r,I())}var L=[Object(g.e)(f.f,function(e){return T(j.a.mark(function t(){var r,n;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g.b)(D,e.userId);case 3:if((r=t.sent).error){t.next=10;break}return n=r,t.next=8,Object(g.c)(y.e(n));case 8:t.next=12;break;case 10:return t.next=12,Object(g.c)(y.a(r));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(0),t.next=18,Object(g.c)(y.a(t.t0));case 18:case"end":return t.stop()}},t,null,[[0,14]])}))}),Object(g.e)(f.d,function(e){return T(j.a.mark(function t(){var r,n,a,c,u;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((r=JSON.parse(window.localStorage.getItem(e.userId)))&&Date.now()-r.timestamp<36e5)){t.next=7;break}return t.next=5,Object(g.c)(y.c(r.data));case 5:t.next=31;break;case 7:return t.next=9,Object(g.b)(D,e.userId);case 9:if(!(n=t.sent).user||n.error){t.next=29;break}if(!(a=n).user.user_shelves){t.next=23;break}return c=a.user.user_shelves.user_shelf.map(function(e){return e.name}),t.next=16,Object(g.a)(c.map(function(t){return Object(g.b)(H,e.userId,t)}));case 16:return u=t.sent,a.user.user_shelves=u.map(function(e,t){return{name:c[t],books:e.books?e.books:{book:[]}}}),window.localStorage.setItem(e.userId,JSON.stringify({data:a,timestamp:Date.now()})),t.next=21,Object(g.c)(y.c(a));case 21:t.next=27;break;case 23:return t.next=25,Object(g.c)(y.g({title:"Private Account",message:"Sorry ".concat(a.user.name,", your account is private. Can't fetch your data.")}));case 25:return t.next=27,Object(g.c)(y.c({user:Object(d.a)({},a.user,{user_shelves:[]})}));case 27:t.next=31;break;case 29:return t.next=31,Object(g.c)(y.f({title:"Network Error",message:n.message}));case 31:t.next=37;break;case 33:return t.prev=33,t.t0=t.catch(0),t.next=37,Object(g.c)(y.a(t.t0));case 37:case"end":return t.stop()}},t,null,[[0,33]])}))})],U=j.a.mark(A);function A(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)([].concat(Object(E.a)(k),Object(E.a)(L)));case 2:case"end":return e.stop()}},U)}var F=A,N=Object(l.a)();var z=r(42),P=r(43),W=r(46),J=r(44),M=r(47),q=r(21),B=r(130),G=r(127),K=r(128),V=r(131),$=r(37),Q=r(25),X=r(126),Y=(r(106),r(107),Object(n.lazy)(function(){return Promise.all([r.e(0),r.e(4),r.e(3),r.e(11),r.e(15)]).then(r.bind(null,587))})),Z=Object(n.lazy)(function(){return Promise.all([r.e(0),r.e(4),r.e(20),r.e(16)]).then(r.bind(null,572))}),ee=Object(n.lazy)(function(){return r.e(21).then(r.bind(null,257))}),te=Object(n.lazy)(function(){return Promise.all([r.e(0),r.e(3),r.e(19),r.e(22)]).then(r.bind(null,573))}),re=function(e){function t(e){var r;return Object(z.a)(this,t),(r=Object(W.a)(this,Object(J.a)(t).call(this,e))).searchHandler=r.searchHandler.bind(Object(q.a)(Object(q.a)(r))),$.a.initialize("UA-132487735-1",{testMode:r.props.testMode}),$.a.pageview(window.location.pathname+window.location.search),r}return Object(M.a)(t,e),Object(P.a)(t,[{key:"searchHandler",value:function(e){this.props.history.push("/user/".concat(e,"/viz/rgraph"))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Q.a,null)},a.a.createElement(ee,null,a.a.createElement(X.a,{className:"App",spinning:this.props.isLoading>0,delay:500},a.a.createElement(B.a,null,a.a.createElement(G.a,{exact:!0,path:"/",render:function(t){return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Q.a,null)},a.a.createElement(Z,{searchHandler:e.searchHandler}))}}),a.a.createElement(G.a,{path:"/user/:userId",render:function(e){return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Q.a,null)},a.a.createElement(Y,e))}}),a.a.createElement(K.a,{to:"/"})),this.props.error&&a.a.createElement(te,{error:this.props.error}))))}}]),t}(n.Component);re.defaultProps={testMode:!1};var ne=Object(V.a)(Object(s.b)(function(e){return{isLoading:e.app.isLoading,error:e.app.error}},{})(re));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(123);var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[N],r=[i.a.apply(void 0,t)],n=i.d,a=Object(i.e)(O,e,n.apply(void 0,r));return a.runSaga=N.run(F),a.injectedReducers={},a.injectedSagas={},a}();u.a.render(a.a.createElement(s.a,{store:ae},a.a.createElement(o.a,null,a.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,r){"use strict";var n=r(1),a=r.n(n);r(105);t.a=function(){return a.a.createElement("div",{className:"suspenseFallback"},"Loading...")}},4:function(e,t,r){"use strict";r.d(t,"h",function(){return n}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return c}),r.d(t,"i",function(){return u}),r.d(t,"j",function(){return s}),r.d(t,"b",function(){return o}),r.d(t,"f",function(){return i}),r.d(t,"g",function(){return l}),r.d(t,"d",function(){return d}),r.d(t,"e",function(){return f});var n="HELLO_WORLD",a="FETCH_START",c="ERROR_OCCURED",u="NETWORK_ERROR_OCCURED",s="PRIVATE_ACCOUNT_ERROR",o="FETCH_END",i="FETCH_USER_INFO",l="FETCH_USER_INFO_SUCCESS",d="FETCH_USER_DATA",f="FETCH_USER_DATA_SUCCESS"},94:function(e,t,r){e.exports=r(124)}},[[94,7,9]]]);
//# sourceMappingURL=main.08bbaf6d.chunk.js.map