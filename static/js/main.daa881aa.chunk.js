(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{106:function(e,t,r){},108:function(e,t,r){},12:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return u}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return s}),r.d(t,"g",function(){return i}),r.d(t,"f",function(){return l});var n=r(4),a=function(e){return{type:n.a,err:e}},c=function(e){return{type:n.f,userId:e}},u=function(e){return{type:n.g,userInfo:e}},o=function(e){return{type:n.d,userId:e}},s=function(e){return{type:n.e,userData:e}},i=function(e){return{type:n.j,err:e}},l=function(e){return{type:n.i,err:e}}},124:function(e,t,r){},125:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(42),u=r.n(c),o=r(24),s=r(130),i=r(16),l=r(67),f=r(11),d=r(4),p={isLoading:0,error:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d.c:return Object(f.a)({},e,{isLoading:e.isLoading+1});case d.b:return Object(f.a)({},e,{isLoading:e.isLoading-1});case d.a:var r=t.err;return Object(f.a)({},e,{error:{title:r.name,message:r.message}});case d.i:var n=t.err;return Object(f.a)({},e,{error:n});case d.j:var a=t.err;return Object(f.a)({},e,{error:a});default:return e}},h={userId:null,userInfo:null,userData:null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d.f:var r=t.userId;return Object(f.a)({},e,{userId:r});case d.g:var n=t.userInfo;return Object(f.a)({},e,{userInfo:n.user});case d.d:var a=t.userId;return Object(f.a)({},e,{userId:a});case d.e:var c=t.userData;return Object(f.a)({},e,{userData:c.user});default:return e}},v=Object(i.c)({app:b,dashboard:m}),O=r(6),j=r.n(O),g=r(39),w=r(5),E=j.a.mark(k);function k(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.c)({type:"SUCCESS",message:"Hello World"});case 2:case"end":return e.stop()}},E)}var x=[Object(w.d)(d.h,k)],y=r(12),I=r(37),S="https://uqh87q11i5.execute-api.us-east-1.amazonaws.com/prod",_=j.a.mark(D),C=function(){return{method:"GET",headers:{"Content-Type":"application/json"}}},R=function(e){if(200!==e.status){var t={error:{code:e.status,message:"Fetch error"},status:e.status,statusText:e.statusText};return Promise.reject(t)}return e.json().then(function(e){return e})},T=function(e,t){return fetch(e).then(R).catch(function(e){return e})};function D(e){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.c)({type:d.c});case 2:return t.next=4,e();case 4:return t.next=6,Object(w.c)({type:d.b});case 6:case"end":return t.stop()}},_)}function H(e){var t="".concat(S,"/user/show?id=").concat(e);return T(t,C())}function L(e,t){return A.apply(this,arguments)}function A(){return(A=Object(I.a)(j.a.mark(function e(t,r){var n,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise(function(){var e=Object(I.a)(j.a.mark(function e(n,a){var c,u,o,s,i,l,f,d,p,b;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=1,u=!1,o={books:{total:0,book:[]}};case 3:return s="".concat(S,"/review/list?id=").concat(t,"&shelf=").concat(r,"&per_page=200&page=").concat(c),e.next=6,T(s,C());case 6:i=e.sent,l=i.books,f=l.currentpage,d=l.numpages,p=l.book,b=l.total,o.books.total=parseInt(b),p&&(o.books.book=o.books.book.concat(p.constructor===Array?p:[p])),c+=1,f===d&&(u=!0,n(o));case 12:if(!1===u){e.next=3;break}case 13:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=[Object(w.e)(d.f,function(e){return D(j.a.mark(function t(){var r,n;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(w.b)(H,e.userId);case 3:if((r=t.sent).error){t.next=10;break}return n=r,t.next=8,Object(w.c)(y.e(n));case 8:t.next=12;break;case 10:return t.next=12,Object(w.c)(y.a(r));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(0),t.next=18,Object(w.c)(y.a(t.t0));case 18:case"end":return t.stop()}},t,null,[[0,14]])}))}),Object(w.e)(d.d,function(e){return D(j.a.mark(function t(){var r,n,a,c,u;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((r=JSON.parse(window.localStorage.getItem(e.userId)))&&Date.now()-r.timestamp<36e5)){t.next=7;break}return t.next=5,Object(w.c)(y.c(r.data));case 5:t.next=31;break;case 7:return t.next=9,Object(w.b)(H,e.userId);case 9:if(!(n=t.sent).user||n.error){t.next=29;break}if(!(a=n).user.user_shelves){t.next=23;break}return c=a.user.user_shelves.user_shelf.map(function(e){return e.name}),t.next=16,Object(w.a)(c.map(function(t){return Object(w.b)(L,e.userId,t)}));case 16:u=t.sent,a.user.user_shelves=u.map(function(e,t){return{name:c[t],books:e.books?e.books:{book:[]}}});try{window.localStorage.setItem(e.userId,JSON.stringify({data:a,timestamp:Date.now()}))}catch(o){console.log(o)}return t.next=21,Object(w.c)(y.c(a));case 21:t.next=27;break;case 23:return t.next=25,Object(w.c)(y.g({title:"Private Account",message:"Sorry ".concat(a.user.name,", your account is private. Can't fetch your data.")}));case 25:return t.next=27,Object(w.c)(y.c({user:Object(f.a)({},a.user,{user_shelves:[]})}));case 27:t.next=31;break;case 29:return t.next=31,Object(w.c)(y.f({title:"Network Error",message:n.message}));case 31:t.next=37;break;case 33:return t.prev=33,t.t0=t.catch(0),t.next=37,Object(w.c)(y.a(t.t0));case 37:case"end":return t.stop()}},t,null,[[0,33]])}))})],F=j.a.mark(N);function N(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)([].concat(Object(g.a)(x),Object(g.a)(U)));case 2:case"end":return e.stop()}},F)}var P=N,z=Object(l.a)();var W=r(43),J=r(44),M=r(47),q=r(45),B=r(48),G=r(21),K=r(131),V=r(128),$=r(129),Q=r(132),X=r(38),Y=r(25),Z=r(127),ee=(r(107),r(108),Object(n.lazy)(function(){return Promise.all([r.e(0),r.e(4),r.e(3),r.e(11),r.e(15)]).then(r.bind(null,608))})),te=Object(n.lazy)(function(){return Promise.all([r.e(0),r.e(4),r.e(20),r.e(16)]).then(r.bind(null,593))}),re=Object(n.lazy)(function(){return r.e(21).then(r.bind(null,264))}),ne=Object(n.lazy)(function(){return Promise.all([r.e(0),r.e(3),r.e(19),r.e(22)]).then(r.bind(null,594))}),ae=function(e){function t(e){var r;return Object(W.a)(this,t),(r=Object(M.a)(this,Object(q.a)(t).call(this,e))).searchHandler=r.searchHandler.bind(Object(G.a)(Object(G.a)(r))),X.a.initialize("UA-132487735-1",{testMode:r.props.testMode}),X.a.pageview(window.location.pathname+window.location.search),r}return Object(B.a)(t,e),Object(J.a)(t,[{key:"searchHandler",value:function(e){this.props.history.push("/user/".concat(e,"/viz/rgraph"))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Y.a,null)},a.a.createElement(re,null,a.a.createElement(Z.a,{className:"App",spinning:this.props.isLoading>0,delay:500},a.a.createElement(K.a,null,a.a.createElement(V.a,{exact:!0,path:"/",render:function(t){return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Y.a,null)},a.a.createElement(te,{searchHandler:e.searchHandler}))}}),a.a.createElement(V.a,{path:"/user/:userId",render:function(e){return a.a.createElement(n.Suspense,{fallback:a.a.createElement(Y.a,null)},a.a.createElement(ee,e))}}),a.a.createElement($.a,{to:"/"})),this.props.error&&a.a.createElement(ne,{error:this.props.error}))))}}]),t}(n.Component);ae.defaultProps={testMode:!1};var ce=Object(Q.a)(Object(o.b)(function(e){return{isLoading:e.app.isLoading,error:e.app.error}},{})(ae));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(124);var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[z],r=[i.a.apply(void 0,t)],n=i.d,a=Object(i.e)(v,e,n.apply(void 0,r));return a.runSaga=z.run(P),a.injectedReducers={},a.injectedSagas={},a}();u.a.render(a.a.createElement(o.a,{store:ue},a.a.createElement(s.a,{basename:"/"},a.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,r){"use strict";var n=r(1),a=r.n(n);r(106);t.a=function(){return a.a.createElement("div",{className:"suspenseFallback"},"Loading...")}},4:function(e,t,r){"use strict";r.d(t,"h",function(){return n}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return c}),r.d(t,"i",function(){return u}),r.d(t,"j",function(){return o}),r.d(t,"b",function(){return s}),r.d(t,"f",function(){return i}),r.d(t,"g",function(){return l}),r.d(t,"d",function(){return f}),r.d(t,"e",function(){return d});var n="HELLO_WORLD",a="FETCH_START",c="ERROR_OCCURED",u="NETWORK_ERROR_OCCURED",o="PRIVATE_ACCOUNT_ERROR",s="FETCH_END",i="FETCH_USER_INFO",l="FETCH_USER_INFO_SUCCESS",f="FETCH_USER_DATA",d="FETCH_USER_DATA_SUCCESS"},95:function(e,t,r){e.exports=r(125)}},[[95,7,9]]]);
//# sourceMappingURL=main.daa881aa.chunk.js.map