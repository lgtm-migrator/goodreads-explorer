{"version":3,"sources":["assets/images/good_reads_explorer.png","components/ErrorBoundary/index.jsx","components/NetworkGraph/examples/basic/tiny_grid.png","components/UserProfile/index.jsx","containers/Dashboard/index.jsx"],"names":["module","exports","__webpack_require__","p","ErrorBoundary","props","_this","Object","_home_travis_build_rpidanny_goodreads_explorer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_home_travis_build_rpidanny_goodreads_explorer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_rpidanny_goodreads_explorer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","hasError","error","info","console","log","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","children","Component","Meta","Card","UserProfile","react_default","card","bordered","className","avatar","src","user","image","size","title","href","link","target","rel","name","description","length","concat","slice","RelationshipGraph","lazy","Promise","all","e","then","bind","BookLibrary","SubMenu","Menu","Content","Layout","Sider","mapDispatchToProps","getUserInfo","getUserData","Dashboard","classCallCheck","possibleConstructorReturn","getPrototypeOf","openMenuKeys","graphSettings","handleMenuOpenChange","assertThisInitialized","rootSubmenuKeys","match","params","userId","openKeys","_this2","latestOpenKey","find","key","indexOf","setState","userData","layout","breakpoint","collapsedWidth","onBreakpoint","broken","onCollapse","collapsed","type","width","style","padding","background","Link","to","goodReadsLogo","alt","getUserComponent","getMenu","backgroundImage","bgImage","margin","height","getContent","context","Switch","Route","exact","path","render","react","fallback","Fallback","getBookLibrary","shelf","components_UserProfile","userName","user_name","image_url","about","last_active","menu","mode","defaultSelectedKeys","borderRight","theme","onOpenChange","icon","Item","id","user_shelves","map","idx","books","book","bookShelf","sh","toUpperCase","connect","userInfo","dashboard"],"mappings":"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","file":"static/js/11.0398ee53.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/good_reads_explorer.eff85db6.png\";","import React, { Component } from 'react'\n\nclass ErrorBoundary extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError (error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch (error, info) {\n    // You can also log the error to an error reporting service\n    // logErrorToMyService(error, info)\n    console.log('Error', error, info)\n  }\n\n  render () {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAAAAACMIRMSAAAAmElEQVR4AX2RwQ4EIQhD/f9ftYW7p6U0buYiEmLG5fGUXRlELda2eyEJ6mDFea36Kf8RZ1egUjFTOFTtn4RSFN6Uu7Pq0bu7iFx8U/ZEh3yyyEk1fFIy+CXiXB+Ve3TdGVxuN6XTeRo0Y6d38aMLH8ZvtBXjDK/BtayAreM0dBdXZqcsdq+cJv/9f/3l286UK68zZVKX6V0/HECKK51+49AAAAAASUVORK5CYII=\"","import React from 'react'\n\n// antd components\nimport { Avatar, Card } from 'antd'\n\nimport './style.css'\n\nconst { Meta } = Card\n\nconst UserProfile = props => (\n  <Card\n    bordered={false}\n    className='userCard'\n  >\n    <Meta\n      avatar={\n        <Avatar src={props.user.image} size='large' />\n      }\n      title={\n        <a\n          href={props.user.link}\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          {props.user.name}\n        </a>\n      }\n      description={\n        props.user.description.length > 160\n          ? `${props.user.description.slice(0, 160)}...`\n          : props.user.description}\n      className='userCardMeta'\n    />\n  </Card>\n)\n\nexport default UserProfile\n","import React, { Component, lazy, Suspense } from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Switch, Link } from 'react-router-dom'\nimport { getUserInfo, getUserData } from './action'\n\n// antd components\nimport { Layout, Menu, Icon } from 'antd'\n\nimport Fallback from '../../components/Fallback'\nimport UserProfile from '../../components/UserProfile'\nimport ErrorBoundary from '../../components/ErrorBoundary'\n\nimport bgImage from '../../components/NetworkGraph/examples/basic/tiny_grid.png'\n// import goodReadsLogo from '../../assets/images/goodreads-logo-transparent.png'\nimport goodReadsLogo from '../../assets/images/good_reads_explorer.png'\n\nimport './style.css'\n\nconst RelationshipGraph = lazy(() => import('../RelationshipGraph'))\nconst BookLibrary = lazy(() => import('../BookLibrary'))\n\nconst { SubMenu } = Menu\nconst { Content, Sider } = Layout\n\nconst mapStorageToProps = state => ({\n  userInfo: state.dashboard.userInfo,\n  userData: state.dashboard.userData\n})\n\nconst mapDispatchToProps = {\n  getUserInfo,\n  getUserData\n}\n\nclass Dashboard extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      openMenuKeys: [ 'graphs' ]\n    }\n    console.log('Init Settings', this.state.graphSettings)\n    console.log('props', this.props)\n    this.handleMenuOpenChange = this.handleMenuOpenChange.bind(this)\n\n    this.rootSubmenuKeys = ['graphs', 'shelves']\n  }\n\n  componentDidMount () {\n    this.props.getUserData(this.props.match.params.userId)\n  }\n\n  handleMenuOpenChange (openKeys) {\n    const latestOpenKey = openKeys.find(key => this.state.openMenuKeys.indexOf(key) === -1)\n    if (this.rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n      this.setState({ openMenuKeys: openKeys })\n    } else {\n      this.setState({\n        openMenuKeys: latestOpenKey ? [latestOpenKey] : []\n      })\n    }\n  }\n\n  render () {\n    const { userData } = this.props\n    // console.log(userData)\n    return (\n      <ErrorBoundary>\n        <Layout\n          className='dashboard'\n        >\n          <Layout>\n            <Sider\n              breakpoint='lg'\n              collapsedWidth='0'\n              onBreakpoint={(broken) => { console.log(broken) }}\n              onCollapse={(collapsed, type) => { console.log(collapsed, type) }}\n              className='sider'\n              width={270}\n            >\n              <div className='sider-inner'>\n                <div className='logo' style={{\n                  padding: '10px',\n                  background: '#fff'\n                }}>\n                  <Link to={'/'}>\n                    <img\n                      src={goodReadsLogo}\n                      width='250px'\n                      alt='Goodreads'\n                    />\n                  </Link>\n                </div>\n                {\n                  getUserComponent(userData)\n                }\n                {\n                  getMenu(this)\n                }\n              </div>\n            </Sider>\n            <Layout>\n              <Content\n                className='mainContent'\n                style={{\n                  backgroundImage: { bgImage }, padding: 0, margin: 0, height: '100%'\n                }}\n              >\n                { getContent(this) }\n              </Content>\n            </Layout>\n          </Layout>\n        </Layout>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst getContent = (context) => {\n  const { userData } = context.props\n\n  if (context.props.userData) {\n    return (\n      <Switch>\n        <Route\n          exact\n          path='/user/:userId/graph/:graph'\n          render={props => (\n            <Suspense fallback={<Fallback />}>\n              <RelationshipGraph\n                userData={context.props.userData}\n              />\n            </Suspense>\n          )}\n        />\n        <Route\n          exact\n          path='/user/:userId/shelf/:shelf'\n          render={props => getBookLibrary(userData, props.match.params.shelf)}\n        />\n      </Switch>\n    )\n  }\n}\n\nconst getUserComponent = (userData) => {\n  if (userData) {\n    return (\n      <UserProfile\n        user={{\n          name: userData.name || '',\n          userName: userData.user_name || '',\n          image: userData.image_url || '',\n          link: userData.link,\n          description: typeof userData.about === 'string' ? userData.about : `Last active: ${userData.last_active}`\n        }}\n      />\n    )\n  }\n  return (\n    <UserProfile\n      user={{\n        name: '',\n        userName: '',\n        image: '',\n        description: ''\n      }}\n    />\n  )\n}\n\nconst getMenu = (context) => {\n  const { userData } = context.props\n  if (userData) {\n    console.log(userData)\n    return (\n      <Menu\n        mode='inline'\n        openKeys={context.state.openMenuKeys}\n        defaultSelectedKeys={['rgraph']}\n        style={{\n          // height: '100%',\n          borderRight: 0\n        }}\n        theme='light'\n        onOpenChange={context.handleMenuOpenChange}\n      >\n        <SubMenu\n          key='graphs'\n          title={\n            <span><Icon type='global' />Graphs</span>\n          }\n        >\n          <Menu.Item key='rgraph'>\n            <Link to={`/user/${userData.id}/graph/rgraph`}>\n              Relationship Graph\n            </Link>\n          </Menu.Item>\n        </SubMenu>\n        <SubMenu\n          key='shelves'\n          title={<span><Icon type='book' />Shelves</span>}\n        >\n          {\n            userData.user_shelves.map((shelf, idx) => (\n              <Menu.Item key={idx}>\n                <Link to={`/user/${userData.id}/shelf/${shelf.name}`}>\n                  {`${shelf.name} (${shelf.books.book ? shelf.books.book.length || 1 : 0})`}\n                </Link>\n              </Menu.Item>\n            ))\n          }\n        </SubMenu>\n      </Menu>\n    )\n  }\n  return <div />\n}\n\nconst getBookLibrary = (userData, shelf) => {\n  if (userData) {\n    let bookShelf = userData.user_shelves.find(sh => sh.name === shelf)\n    if (bookShelf) {\n      let { books } = bookShelf\n      if (!books.book) return <div />\n      books = books.book.length ? books.book : [ books.book ]\n      return (\n        <Suspense fallback={<Fallback />} >\n          <BookLibrary\n            books={books}\n            title={bookShelf.name.toUpperCase()}\n          />\n        </Suspense>\n      )\n    }\n    return (\n      <div\n        style={{\n          padding: 20\n        }}\n      >\n        <p>Bookshelf doesn't exist.</p>\n      </div>\n    )\n  }\n  return <div />\n}\n\nexport default connect(\n  mapStorageToProps,\n  mapDispatchToProps\n)(Dashboard)\n"],"sourceRoot":""}