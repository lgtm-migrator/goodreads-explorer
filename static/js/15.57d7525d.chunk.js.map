{"version":3,"sources":["assets/images/good_reads_explorer.png","components/ErrorBoundary/index.jsx","components/NetworkGraph/examples/basic/tiny_grid.png","components/UserProfile/index.jsx","containers/Dashboard/index.jsx"],"names":["module","exports","ErrorBoundary","props","state","hasError","error","info","console","log","this","children","Component","Meta","Card","UserProfile","bordered","className","avatar","src","user","image","size","title","href","link","target","rel","name","description","length","slice","RelationshipGraph","lazy","Statistics","BookLibrary","SubMenu","Menu","Content","Layout","Sider","mapDispatchToProps","getUserInfo","getUserData","Dashboard","openMenuKeys","graphSettings","handleMenuOpenChange","bind","rootSubmenuKeys","match","params","userId","openKeys","latestOpenKey","find","key","indexOf","setState","userData","breakpoint","collapsedWidth","onBreakpoint","broken","onCollapse","collapsed","type","width","style","padding","background","Link","to","goodReadsLogo","alt","getUserComponent","getMenu","backgroundImage","bgImage","margin","height","getContent","context","Switch","Route","exact","path","render","fallback","Fallback","getBookLibrary","shelf","userName","user_name","image_url","about","last_active","mode","defaultSelectedKeys","borderRight","theme","onOpenChange","Item","id","user_shelves","map","idx","books","book","bookShelf","sh","toUpperCase","connect","userInfo","dashboard"],"mappings":"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","file":"static/js/15.57d7525d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/good_reads_explorer.eff85db6.png\";","import React, { Component } from 'react'\n\nclass ErrorBoundary extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError (error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch (error, info) {\n    // You can also log the error to an error reporting service\n    // logErrorToMyService(error, info)\n    console.log('Error', error, info)\n  }\n\n  render () {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAAAAACMIRMSAAAAmElEQVR4AX2RwQ4EIQhD/f9ftYW7p6U0buYiEmLG5fGUXRlELda2eyEJ6mDFea36Kf8RZ1egUjFTOFTtn4RSFN6Uu7Pq0bu7iFx8U/ZEh3yyyEk1fFIy+CXiXB+Ve3TdGVxuN6XTeRo0Y6d38aMLH8ZvtBXjDK/BtayAreM0dBdXZqcsdq+cJv/9f/3l286UK68zZVKX6V0/HECKK51+49AAAAAASUVORK5CYII=\"","import React from 'react'\n\n// antd components\nimport { Avatar, Card } from 'antd'\n\nimport './style.css'\n\nconst { Meta } = Card\n\nconst UserProfile = props => (\n  <Card\n    bordered={false}\n    className='userCard'\n  >\n    <Meta\n      avatar={\n        <Avatar src={props.user.image} size='large' />\n      }\n      title={\n        <a\n          href={props.user.link}\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          {props.user.name}\n        </a>\n      }\n      description={\n        props.user.description.length > 160\n          ? `${props.user.description.slice(0, 160)}...`\n          : props.user.description}\n      className='userCardMeta'\n    />\n  </Card>\n)\n\nexport default UserProfile\n","import React, { Component, lazy, Suspense } from 'react'\nimport { connect } from 'react-redux'\nimport { Route, Switch, Link } from 'react-router-dom'\nimport { getUserInfo, getUserData } from './action'\n\n// antd components\nimport { Layout, Menu, Icon } from 'antd'\n\nimport Fallback from '../../components/Fallback'\nimport UserProfile from '../../components/UserProfile'\nimport ErrorBoundary from '../../components/ErrorBoundary'\n\nimport bgImage from '../../components/NetworkGraph/examples/basic/tiny_grid.png'\n// import goodReadsLogo from '../../assets/images/goodreads-logo-transparent.png'\nimport goodReadsLogo from '../../assets/images/good_reads_explorer.png'\n\nimport './style.css'\n\nconst RelationshipGraph = lazy(() => import('../RelationshipGraph'))\nconst Statistics = lazy(() => import('../Statistics'))\nconst BookLibrary = lazy(() => import('../BookLibrary'))\n\nconst { SubMenu } = Menu\nconst { Content, Sider } = Layout\n\nconst mapStorageToProps = state => ({\n  userInfo: state.dashboard.userInfo,\n  userData: state.dashboard.userData\n})\n\nconst mapDispatchToProps = {\n  getUserInfo,\n  getUserData\n}\n\nclass Dashboard extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      openMenuKeys: [ 'viz' ]\n    }\n    console.log('Init Settings', this.state.graphSettings)\n    console.log('props', this.props)\n    this.handleMenuOpenChange = this.handleMenuOpenChange.bind(this)\n\n    this.rootSubmenuKeys = ['viz', 'shelves']\n  }\n\n  componentDidMount () {\n    this.props.getUserData(this.props.match.params.userId)\n  }\n\n  handleMenuOpenChange (openKeys) {\n    const latestOpenKey = openKeys.find(key => this.state.openMenuKeys.indexOf(key) === -1)\n    if (this.rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n      this.setState({ openMenuKeys: openKeys })\n    } else {\n      this.setState({\n        openMenuKeys: latestOpenKey ? [latestOpenKey] : []\n      })\n    }\n  }\n\n  render () {\n    const { userData } = this.props\n    // console.log(userData)\n    return (\n      <ErrorBoundary>\n        <Layout\n          className='dashboard'\n        >\n          <Layout>\n            <Sider\n              breakpoint='lg'\n              collapsedWidth='0'\n              onBreakpoint={(broken) => { console.log(broken) }}\n              onCollapse={(collapsed, type) => { console.log(collapsed, type) }}\n              className='sider'\n              width={270}\n            >\n              <div className='sider-inner'>\n                <div className='logo' style={{\n                  padding: '10px',\n                  background: '#fff'\n                }}>\n                  <Link to={'/'}>\n                    <img\n                      src={goodReadsLogo}\n                      width='250px'\n                      alt='Goodreads'\n                    />\n                  </Link>\n                </div>\n                {\n                  getUserComponent(userData)\n                }\n                {\n                  getMenu(this)\n                }\n              </div>\n            </Sider>\n            <Layout>\n              <Content\n                className='mainContent'\n                style={{\n                  backgroundImage: { bgImage }, padding: 0, margin: 0, height: '100%'\n                }}\n              >\n                { getContent(this) }\n              </Content>\n            </Layout>\n          </Layout>\n        </Layout>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst getContent = (context) => {\n  const { userData } = context.props\n\n  if (context.props.userData) {\n    return (\n      <Switch>\n        <Route\n          exact\n          path='/user/:userId/viz/rgraph'\n          render={props => (\n            <Suspense fallback={<Fallback />}>\n              <RelationshipGraph\n                userData={context.props.userData}\n              />\n            </Suspense>\n          )}\n        />\n        <Route\n          exact\n          path='/user/:userId/viz/stats'\n          render={props => (\n            <Suspense fallback={<Fallback />}>\n              <Statistics\n                userData={context.props.userData}\n              />\n            </Suspense>\n          )}\n        />\n        <Route\n          exact\n          path='/user/:userId/shelf/:shelf'\n          render={props => getBookLibrary(userData, props.match.params.shelf)}\n        />\n      </Switch>\n    )\n  }\n}\n\nconst getUserComponent = (userData) => {\n  if (userData) {\n    return (\n      <UserProfile\n        user={{\n          name: userData.name || '',\n          userName: userData.user_name || '',\n          image: userData.image_url || '',\n          link: userData.link,\n          description: typeof userData.about === 'string' ? userData.about : `Last active: ${userData.last_active}`\n        }}\n      />\n    )\n  }\n  return (\n    <UserProfile\n      user={{\n        name: '',\n        userName: '',\n        image: '',\n        description: ''\n      }}\n    />\n  )\n}\n\nconst getMenu = (context) => {\n  const { userData } = context.props\n  if (userData) {\n    console.log(userData)\n    return (\n      <Menu\n        mode='inline'\n        openKeys={context.state.openMenuKeys}\n        defaultSelectedKeys={['stats']}\n        style={{\n          // height: '100%',\n          borderRight: 0\n        }}\n        theme='light'\n        onOpenChange={context.handleMenuOpenChange}\n      >\n        <SubMenu\n          key='viz'\n          title={\n            <span><Icon type='global' />Visualizations</span>\n          }\n        >\n          <Menu.Item key='stats'>\n            <Link to={`/user/${userData.id}/viz/stats`}>\n              Statistics\n            </Link>\n          </Menu.Item>\n          <Menu.Item key='rgraph'>\n            <Link to={`/user/${userData.id}/viz/rgraph`}>\n              Relationship Graph\n            </Link>\n          </Menu.Item>\n        </SubMenu>\n        <SubMenu\n          key='shelves'\n          title={<span><Icon type='book' />Shelves</span>}\n        >\n          {\n            userData.user_shelves.map((shelf, idx) => (\n              <Menu.Item key={idx}>\n                <Link to={`/user/${userData.id}/shelf/${shelf.name}`}>\n                  {`${shelf.name} (${shelf.books.book ? shelf.books.book.length || 1 : 0})`}\n                </Link>\n              </Menu.Item>\n            ))\n          }\n        </SubMenu>\n      </Menu>\n    )\n  }\n  return <div />\n}\n\nconst getBookLibrary = (userData, shelf) => {\n  if (userData) {\n    let bookShelf = userData.user_shelves.find(sh => sh.name === shelf)\n    if (bookShelf) {\n      let { books } = bookShelf\n      if (!books.book) return <div />\n      books = books.book.length ? books.book : [ books.book ]\n      return (\n        <Suspense fallback={<Fallback />} >\n          <BookLibrary\n            books={books}\n            title={bookShelf.name.toUpperCase()}\n          />\n        </Suspense>\n      )\n    }\n    return (\n      <div\n        style={{\n          padding: 20\n        }}\n      >\n        <p>Bookshelf doesn't exist.</p>\n      </div>\n    )\n  }\n  return <div />\n}\n\nexport default connect(\n  mapStorageToProps,\n  mapDispatchToProps\n)(Dashboard)\n"],"sourceRoot":""}